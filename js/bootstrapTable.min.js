class BsTable{options={itemsToPage:50,hiddenColumns:["phone"],tableHeight:"500px",fixedHeaderTable:!0};container;table;tbody;endBtable;noDataMsg;contTable;#a;data;pagesTotal=0;pageCurrent=0;rowsToPage=50;searchResultData=[];itsSearchProcess=!1;needScroll=!1;constructor(t,e,s=options){this.table=document.getElementById(t),this.data=e,this.options=s,this.#b();let i=this.table.parentNode;this.container=document.createElement("div"),this.container.classList.add("position-relative"),this.contTable=document.createElement("div"),this.contTable.style.overflowX="auto",this.contTable.classList.add("mt-3","position-relative"),void 0!=this.options.tableHeight&&(this.contTable.style.height=this.options.tableHeight.toString()),this.contTable.append(this.table),this.endBtable=document.createElement("div"),this.endBtable.id="endBtable",this.contTable.append(this.table),this.contTable.append(this.endBtable),this.noDataMsg=document.createElement("div"),this.noDataMsg.classList.add("text-center","p-2","text-muted"),this.noDataMsg.hidden=!0,this.noDataMsg.innerHTML="Нет данных для отображения",this.contTable.append(this.noDataMsg),this.container.append(this.#c()),this.container.append(this.contTable),this.container.append(this.#d()),i.append(this.container),this.#e(),this.#f(),this.#g(),this.#h(),void 0!=this.options.actions&&(this.#a=new ActionsRow(this.contTable,this.options)),console.log("BsTable created!")}#i;get activeItemData(){return this.#i}set activeItemData(t){this.#i=t}insertRow(t){let e=this.tbody.insertRow();for(let s in t){if(!(void 0!=this.options.hiddenColumns&&this.options.hiddenColumns.indexOf(s.toString())>-1))e.insertCell().innerHTML=`${this.#j(t[s],t,s)}`}e.addEventListener("click",s=>{this.#k(t,e)},!1),e.addEventListener("mouseenter",s=>{this.#l(t,e)},!1),e.addEventListener("mouseleave",s=>{this.#m(t,e)},!1)}removeActiveItem(){let t=this.data.indexOf(this.activeItemData);this.data.splice(t,1),this.#n.remove(),this.activeItemData=null,this.#n=null,this.#a.hide(),console.log("Item deleted"),console.log("Items count: "+this.data.length)}search(t){if(this.#a.hide(),console.log(searchBTableInput.value),this.noDataMsg.hidden=!0,this.pageCurrent=0,t.length>0){this.itsSearchProcess=!0,this.clearTable(),this.searchResultData=[];for(let e=0;e<this.data.length;e++)for(let s in this.data[e])if(!(void 0!=this.options.hiddenColumns&&this.options.hiddenColumns.indexOf(s.toString())>-1)&&this.data[e][s].toString().indexOf(t)>-1){this.insertRow(this.data[e]),this.searchResultData.push(this.data[e]);break}console.log("Find items: "+this.searchResultData.length),0==this.searchResultData.length&&(this.noDataMsg.hidden=!1)}else this.itsSearchProcess=!1,this.searchResultData=[],this.#g()}#o=!1;sortData(t){let e=[];if(this.#a.hide(),(e=this.searchResultData.length>0&&this.itsSearchProcess?this.searchResultData:this.data).sort((e,s)=>{let i=e[t],a=s[t];return i<a?-1:i>a?1:0}),this.#o&&(e=e.reverse()),this.#o=!this.#o,this.searchResultData.length>0&&this.itsSearchProcess){this.clearTable(),this.searchResultData=e;for(let s=0;s<this.searchResultData.length;s++)this.insertRow(this.searchResultData[s])}else this.#g()}clearTable(){let t=this.table.rows.length;for(let e=t-1;e>0;e--)this.table.deleteRow(e)}#h(){setInterval(()=>{!this.itsSearchProcess&&this.data.length>this.rowsToPage&&this.pageCurrent<this.pagesTotal&&this.#p()&&this.#q()},500)}#n;#g(){if(this.clearTable(),this.data.length>this.rowsToPage)for(let t=0;t<this.rowsToPage;t++)this.insertRow(this.data[t]);else for(let e=0;e<this.data.length;e++)this.insertRow(data[e])}#k(s,i){this.activeItemData=s,this.#n=i,this.#a.show(s,i)}#l(a,o){}#m(n,h){}#b(){void 0!=this.options.itemsToPage&&(this.rowsToPage=parseInt(this.options.itemsToPage)),this.data.length=this.data.length,this.pagesTotal=Math.round(this.data.length/this.rowsToPage);this.data.length%this.rowsToPage>0&&this.pagesTotal++,console.log("Total pages: "+this.pagesTotal),console.log("Items count: "+this.data.length)}#j(l,r,d){let c=l;if(void 0!=this.options.replace)for(let p=0;p<this.options.replace.length;p++)if("{value}"===this.options.replace[p].value){if(d===this.options.replace[p].key){let $=r[d];c=this.options.replace[p].replace.replaceAll("{value}",$)}}else this.options.replace[p].value.indexOf(l)>-1&&this.options.replace[p].key.indexOf(d)>-1&&(c=this.options.replace[p].replace);return c}#e(){this.thead=this.table.createTHead(),!0===this.options.fixedHeaderTable?this.thead.classList.add("sticky-top","bg-white","shadow"):this.thead.classList.add("bg-white","shadow");let u=this.thead.insertRow();for(let g in this.data[0])if(!(void 0!=this.options.hiddenColumns&&this.options.hiddenColumns.indexOf(g.toString())>-1)){if(void 0!=this.options.renameColumn){let w=!1;for(let b=0;b<this.options.renameColumn.length;b++)if(this.options.renameColumn[b].key.indexOf(g)>-1){let m=this.options.renameColumn[b].replace;u.appendChild(this.#r(g,m)),w=!0;break}w||u.appendChild(this.#r(g,g))}else u.appendChild(this.#r(g,g))}}#f(){this.tbody=this.table.querySelector("tbody"),(null===this.tbody||void 0===this.tbody)&&(this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody))}#r(v,R){let T=document.createElement("th"),_=document.createElement("span");_.classList.add("d-flex","justify-content-between","align-items-center");let f=document.createElement("span");f.classList.add("me-2"),f.innerHTML=`${R}`;let C=document.createElement("button");return C.classList.add("btn","btn-outline-primary","border-0"),C.addEventListener("click",t=>{this.sortData(`${v}`),console.log(`Sort by: ${v}`)},!1),C.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-up" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5zm-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5z"/>
        </svg>`,_.appendChild(f),_.appendChild(C),T.appendChild(_),T}#c(){let L=document.createElement("div");L.classList.add("row");let y=document.createElement("div");y.classList.add("col-6");let D=document.createElement("input");D.classList.add("form-control"),D.setAttribute("type","search"),D.setAttribute("placeholder","Найти"),D.setAttribute("id","searchBTableInput"),D.addEventListener("input",t=>{this.search(D.value)},!1),y.appendChild(D),L.appendChild(y);let x=document.createElement("div");return x.classList.add("col-6","d-flex","justify-content-end"),L.appendChild(x),L}#d(){return document.createElement("div")}#p(){let E=window.innerHeight,P=this.endBtable.getBoundingClientRect(),S=P.top-E;return S<500}#q(){if(!this.itsSearchProcess&&this.#p()&&this.pageCurrent<this.pagesTotal){this.pageCurrent++;for(let M=this.pageCurrent*this.rowsToPage;M<this.rowsToPage*(this.pageCurrent+1);M++)this.insertRow(this.data[M])}}}class ActionsRow{#a;#s;#t;constructor(t,e){this.#t=e,this.#a=document.createElement("div"),this.#a.classList.add("position-absolute","bg-white","shadow","p-2","d-flex","justify-content-between","align-items-center"),this.#a.style.zIndex="1000",this.#a.style.left="0px",this.#a.style.top="0px",this.#a.style.border="1px solid #c7c7ff",this.#a.style.borderRadius="5px",this.#a.style.transition="all 0.2s ease 0s",this.#a.hidden=!0,this.#s=document.createElement("div"),this.#s.classList.add("btn-group","me-5"),this.#a.append(this.#s);let s=document.createElement("button");s.type="button",s.classList.add("btn-close"),this.#a.append(s),s.addEventListener("click",t=>{this.hide()},!1),t.append(this.#a)}show(t,e){if(void 0!=this.#t.actions&&(this.#a.hidden=!1,this.#a.style.top=e.offsetTop+"px",this.#a.classList.remove("d-none"),this.#s.innerHTML=null,void 0!=this.#t.actions))for(let s=0;s<this.#t.actions.length;s++){let i=this.#t.actions[s];for(let a in t){let o=`{${a}}`;i=i.replaceAll(o,t[a])}this.#s.innerHTML+=i}}hide(){void 0!=this.#t.actions&&null!=this.#a&&(this.#a.hidden=!0,this.#a.classList.add("d-none"))}}class SettingsPanel{constructor(t,e){}}